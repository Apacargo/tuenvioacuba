<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Apacargo ‚Ä¢ Tienda de Carros ‚Äî Colecci√≥n</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
  :root{
    --oro: #d4af37;
    --oro-claro: #ffd700;
    --fondo: #060606;
    --card: #0f0f10;
    --muted: #cfcfcf;
    --accent: #004aad;
    --glass: rgba(255,255,255,0.03);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: 'Poppins', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg, #040404 0%, #0a0a0a 100%);
    color: var(--oro);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    min-height:100vh;
  }

  header{
    background: linear-gradient(90deg,var(--accent),var(--oro));
    color:#fff;
    padding:18px 16px;
    text-align:center;
    font-weight:700;
    letter-spacing:0.6px;
    font-size:1.4rem;
  }

  .container{
    max-width:1200px;
    margin:22px auto;
    padding:18px;
  }

  h1{
    color:var(--oro);
    margin:6px 0 12px 0;
    text-align:center;
    font-size:1.6rem;
  }

  .controls{
    display:flex;
    gap:12px;
    align-items:center;
    justify-content:center;
    flex-wrap:wrap;
    margin-bottom:18px;
  }
  .search-box{ flex:1 1 420px; max-width:720px; }
  #buscar{
    width:100%;
    padding:12px 14px;
    border-radius:10px;
    border:2px solid rgba(212,175,55,0.12);
    background: #0b0b0b;
    color: #fff;
    font-size:15px;
    outline:none;
  }
  #buscar::placeholder{ color: rgba(255,255,255,0.45); }

  .info { color:var(--muted); font-size:14px; }

  /* GRID */
  .productos{
    display:grid;
    grid-template-columns: repeat(auto-fill,minmax(260px,1fr));
    gap:18px;
    margin-top:8px;
  }

  .producto{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border: 2px solid rgba(212,175,55,0.12);
    border-radius:12px;
    overflow:hidden;
    display:flex;
    flex-direction:column;
    transition: transform .22s ease, box-shadow .22s ease, border-color .22s;
  }
  .producto:hover{
    transform: translateY(-6px);
    box-shadow: 0 14px 40px rgba(0,0,0,0.6);
    border-color: var(--oro);
  }

  .thumb-wrap{
    width:100%;
    height:170px;
    background: linear-gradient(180deg,#050505,#111);
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
  }
  .producto img.thumb{
    width:100%;
    height:100%;
    object-fit:cover;
    display:block;
    transition: transform .3s ease;
    cursor:pointer;
    filter: saturate(0.96) contrast(1.02);
  }
  .producto img.thumb:hover{ transform: scale(1.04); }

  .info-card{
    padding:14px;
    display:flex;
    flex-direction:column;
    gap:8px;
  }
  .info-card h3{
    margin:0;
    color:var(--oro);
    font-size:16px;
  }
  .info-card p{
    margin:0;
    color:var(--muted);
    font-size:13px;
    line-height:1.35;
    min-height:48px;
  }
  .precio{
    margin-top:auto;
    color:var(--oro-claro);
    font-weight:800;
    font-size:15px;
  }

  .actions{
    margin-top:8px;
    display:flex;
    gap:8px;
  }
  .btn-whatsapp{
    flex:1;
    display:inline-block;
    text-align:center;
    padding:10px 12px;
    background:var(--oro);
    color:#000;
    border-radius:10px;
    text-decoration:none;
    font-weight:700;
  }
  .btn-copy{
    flex:1;
    padding:10px 12px;
    border-radius:10px;
    background:transparent;
    color:var(--oro);
    border:2px solid rgba(212,175,55,0.12);
    cursor:pointer;
    font-weight:700;
  }
  .btn-copy:hover{ border-color:var(--oro); color:var(--oro-claro); }

  /* modal / visor */
  .visor{
    display:none;
    position:fixed;
    inset:0;
    z-index:9999;
    background: rgba(0,0,0,0.9);
    align-items:center;
    justify-content:center;
    padding:18px;
  }
  .modal-inner{
    width:100%;
    max-width:1100px;
    display:grid;
    grid-template-columns: 1fr 380px;
    gap:18px;
    align-items:start;
  }
  .modal-left{ display:flex; align-items:center; justify-content:center; background:#000; border-radius:10px; padding:8px; }
  .modal-left img{ max-width:100%; max-height:82vh; object-fit:contain; border-radius:8px; }
  .modal-right{
    background: linear-gradient(180deg,#0f0f10,#0b0b0b);
    border:2px solid rgba(212,175,55,0.12);
    padding:14px;
    border-radius:10px;
    color:#fff;
    max-height:82vh;
    overflow:auto;
  }
  .modal-right h2{ color:var(--oro); margin:0 0 8px 0; font-size:20px; }
  .modal-right p{ color:#dcdcdc; margin:6px 0; font-size:14px; line-height:1.45; }
  .modal-right .precio{ color:var(--oro-claro); font-size:18px; font-weight:800; margin-top:12px; }
  .modal-actions{ display:flex; gap:8px; margin-top:12px; }

  .modal-close{
    position:fixed;
    right:18px;
    top:18px;
    font-size:34px;
    color:#fff;
    cursor:pointer;
    z-index:10010;
  }
  .modal-nav{ position:fixed; left:10px; right:10px; top:50%; display:flex; justify-content:space-between; pointer-events:none; }
  .modal-nav button{ pointer-events:auto; background:transparent; border:none; font-size:40px; color:#fff; cursor:pointer; padding:8px; }

  footer{
    text-align:center;
    padding:14px;
    color:var(--muted);
    margin-top:26px;
  }

  @media (max-width:980px){
    .modal-inner{ grid-template-columns:1fr 320px; }
  }
  @media (max-width:720px){
    .modal-inner{ grid-template-columns:1fr; }
    .modal-right{ max-height:40vh; }
    .thumb-wrap{ height:160px; }
    .productos{ gap:14px; grid-template-columns: repeat(auto-fill,minmax(220px,1fr)); }
  }
</style>
</head>
<body>
  <header>üöò Apacargo ‚Äî Tienda de Carros</header>

  <div class="container">
    <h1>Colecci√≥n Premium de Veh√≠culos</h1>

    <div class="controls">
      <div class="search-box">
        <input id="buscar" type="text" placeholder="Buscar por modelo, marca o caracter√≠stica... (ej. 'Tesla', 'BYD', 'el√©ctrico')">
      </div>
      <div class="info">Contacto: <strong style="color:var(--oro-claro)">+53 50896082</strong></div>
    </div>

    <div class="productos" id="productosGrid">
      <!-- Productos renderizados por JS (paginado con lazy) -->
    </div>

    <div style="text-align:center; margin-top:18px;">
      <button id="loadMore" style="padding:10px 16px; border-radius:10px; background:transparent; border:2px solid rgba(212,175,55,0.12); color:var(--oro); font-weight:700;">Cargar m√°s</button>
    </div>
  </div>

  <!-- VISOR / MODAL -->
  <div class="visor" id="visor" role="dialog" aria-hidden="true">
    <div class="modal-close" id="modalClose" title="Cerrar">&times;</div>

    <div class="modal-nav">
      <button id="modalPrev" title="Anterior">&#10094;</button>
      <button id="modalNext" title="Siguiente">&#10095;</button>
    </div>

    <div class="modal-inner" role="document">
      <div class="modal-left">
        <img id="modalImg" src="" alt="Imagen ampliada">
      </div>
      <div class="modal-right">
        <h2 id="modalTitle">T√≠tulo</h2>
        <p id="modalDetails">Detalles...</p>
        <div class="precio" id="modalPrice">Precio</div>
        <div class="modal-actions">
          <a id="modalWhats" class="btn-whatsapp" href="#" target="_blank" rel="noopener">Abrir WhatsApp</a>
          <button id="modalCopy" class="btn-copy">Copiar mensaje</button>
        </div>
      </div>
    </div>
  </div>

  <footer>¬© 2025 Apacargo Tu Env√≠o a Cuba ‚Äî Todos los derechos reservados.</footer>

<script>
/* =================== DATOS: 30 AUTOS (texto original que nos diste) =================== */
const autos = [
  {id:1, nombre:"BYD Dolphin EV", detalles:"Auto 100% el√©ctrico con autonom√≠a de 405 km y carga r√°pida.", precio:"22000 USD", img:"images/car01.jpg"},
  {id:2, nombre:"Geely Coolray", detalles:"SUV moderna con motor turbo y sistema de infoentretenimiento inteligente.", precio:"26000 USD", img:"images/car02.jpg"},
  {id:3, nombre:"Chevrolet Onix 2024", detalles:"Veh√≠culo de combusti√≥n eficiente, ideal para uso familiar o personal.", precio:"23700 USD", img:"images/car03.jpg"},
  {id:4, nombre:"Tesla Model 3", detalles:"El√©ctrico premium con rendimiento deportivo y autonom√≠a de hasta 500 km.", precio:"48600 USD", img:"images/car04.jpg"},
  {id:5, nombre:"Toyota Corolla 2023", detalles:"Sed√°n confiable, motor h√≠brido gasolina-el√©ctrico y bajo consumo.", precio:"31000 USD", img:"images/car05.jpg"},
  {id:6, nombre:"Kia Picanto 2024", detalles:"Compacto urbano, bajo consumo y dise√±o moderno ideal para ciudad.", precio:"17000 USD", img:"images/car06.jpg"},
  {id:7, nombre:"MG ZS EV", detalles:"SUV el√©ctrica de dise√±o brit√°nico, autonom√≠a de 320 km y cero emisiones.", precio:"32900 USD", img:"images/car07.jpg"},
  {id:8, nombre:"Hyundai Accent 2024", detalles:"Sed√°n c√≥modo y eficiente, motor 1.6L y transmisi√≥n autom√°tica.", precio:"22000 USD", img:"images/car08.jpg"},
  {id:9, nombre:"Changan Benni EV", detalles:"Peque√±o el√©ctrico econ√≥mico con 200 km de autonom√≠a. Ideal para ciudad.", precio:"25000 USD", img:"images/car09.jpg"},
  {id:10, nombre:"Nissan Versa 2025", detalles:"Consumo de combustible econ√≥mico, respaldado por estimados de eficiencia.", precio:"22100 USD", img:"images/car10.jpg"},
  {id:11, nombre:"Mitsubishi Mirage 2024", detalles:"Motor de tres cilindros y 1.2 litros, transmisi√≥n CVT y consumo eficiente.", precio:"20500 USD", img:"images/car11.jpg"},
  {id:12, nombre:"Renault Kwid 2025", detalles:"Motor 1.0 litros, incluye 4 airbags y control electr√≥nico de estabilidad.", precio:"23000 USD", img:"images/car12.jpg"},
  {id:13, nombre:"Suzuki Swift 2025", detalles:"Motor h√≠brido suave 1.2L y versi√≥n Sport con Boosterjet 1.4L.", precio:"23000 USD", img:"images/car13.jpg"},
  {id:14, nombre:"Hyundai i10", detalles:"Motor 1.2 MPi con 84 CV y buen comportamiento urbano.", precio:"19600 USD", img:"images/car14.jpg"},
  {id:15, nombre:"Kia Rio", detalles:"Motor 1.6 L con aproximadamente 120 caballos de fuerza.", precio:"20200 USD", img:"images/car15.jpg"},
  {id:16, nombre:"Mazda2", detalles:"Motor Skyactiv-G de 1.5L (‚âà109 HP) con transmisi√≥n autom√°tica 6 vel.", precio:"2400 USD", img:"images/car16.jpg"},
  {id:17, nombre:"Fiat Argo 2023", detalles:"Motor 1.3L con 97 CV; manejo √°gil y buena econom√≠a.", precio:"18000 USD", img:"images/car17.jpg"},
  {id:18, nombre:"Volkswagen Polo 2025", detalles:"1.0 TSI turbo, 99 CV, transmisi√≥n Tiptronic; rendimiento equilibrado.", precio:"30000 USD", img:"images/car18.jpg"},
  {id:19, nombre:"Dacia Sandero 2025", detalles:"Motor 1.0 TCe de 90 CV; opci√≥n de entrada econ√≥mica y fiable.", precio:"18000 USD", img:"images/car19.jpg"},
  {id:20, nombre:"Peugeot 208", detalles:"Motor BlueHDi 1.5L; versiones de 75 y 100 CV.", precio:"22000 USD", img:"images/car20.jpg"},
  {id:21, nombre:"Citroen C3-IN", detalles:"Motor turbo 1.5/1.6L; enfoque pr√°ctico y eficiente.", precio:"19700 USD", img:"images/car21.jpg"},
  {id:22, nombre:"Opel Corsa 2024", detalles:"Opciones el√©ctrico/h√≠brido/gasolina; hasta ~402 km (seg√∫n versi√≥n).", precio:"34000 USD", img:"images/car22.jpg"},
  {id:23, nombre:"Ford Figo 2021", detalles:"Motor 1.5L, hasta 121 hp; conectividad con Apple CarPlay y Android Auto.", precio:"15000 USD", img:"images/car23.jpg"},
  {id:24, nombre:"Chevrolet Spark", detalles:"Motor 1.4L, cuatro cilindros; econ√≥mico y funcional para ciudad.", precio:"18000 USD", img:"images/car24.jpg"},
  {id:25, nombre:"Chevrolet Sail", detalles:"Motor 1.5 DOHC, 98 HP; veh√≠culo robusto y econ√≥mico.", precio:"18000 USD", img:"images/car25.jpg"},
  {id:26, nombre:"Toyota Yaris", detalles:"Motor 1.5L VVT-i de 105 HP; dise√±o moderno y eficiente.", precio:"21000 USD", img:"images/car26.jpg"},
  {id:27, nombre:"Skoda Fabia 2021", detalles:"Motores 1.0 MPI/TSI; versiones entre 80 y 150 CV.", precio:"23500 USD", img:"images/car27.jpg"},
  {id:28, nombre:"Hyundai Venue 2025", detalles:"1.0L turbo 118 HP; transmisi√≥n DCT de 7 marchas.", precio:"25000 USD", img:"images/car28.jpg"},
  {id:29, nombre:"Mercedes-benz A-Class 2024", detalles:"A-200 1.3L turbo 163 CV; tecnolog√≠a y confort premium.", precio:"58000 USD", img:"images/car29.jpg"},
  {id:30, nombre:"MG GT 2024", detalles:"Combustible Gasolina; 1490 cc; potencia 160 HP (seg√∫n versi√≥n).", precio:"18800 USD", img:"images/car30.jpg"}
];

/* =========== PAGINACI√ìN INICIAL Y RENDER =========== */
const CHUNK = 12;
let rendered = 0;
let currentList = autos.slice();
const grid = document.getElementById('productosGrid');
const loadMoreBtn = document.getElementById('loadMore');
const buscar = document.getElementById('buscar');
let observer = null;

function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

function createCard(a, idx){
  const div = document.createElement('div');
  div.className = 'producto';
  div.innerHTML = `
    <div class="thumb-wrap">
      <img class="thumb lazy" data-src="${escapeHtml(a.img)}" alt="${escapeHtml(a.nombre)}" data-idx="${idx}">
    </div>
    <div class="info-card">
      <h3>${escapeHtml(a.nombre)}</h3>
      <p>${escapeHtml(a.detalles)}</p>
      <div class="precio">${escapeHtml(a.precio)}</div>
      <div class="actions">
        <a class="btn-whatsapp" href="https://wa.me/5350896082?text=${encodeURIComponent('Hola, estoy interesado en el veh√≠culo: '+a.nombre)}" target="_blank" rel="noopener">WhatsApp</a>
        <button class="btn-copy" data-idx="${idx}">Copiar</button>
      </div>
    </div>
  `;
  return div;
}

function renderChunk(){
  const to = Math.min(rendered + CHUNK, currentList.length);
  for(let i = rendered; i < to; i++){
    const globalIdx = autos.findIndex(x => x.id === currentList[i].id);
    const card = createCard(currentList[i], globalIdx);
    grid.appendChild(card);
  }
  rendered = to;
  observeLazy();
  updateLoadMore();
}

function renderAll(list){
  grid.innerHTML = '';
  rendered = 0;
  currentList = list.slice();
  renderChunk(); // render first chunk (or all if shorter)
}

function updateLoadMore(){
  loadMoreBtn.style.display = (rendered < currentList.length && buscar.value.trim() === '') ? 'inline-block' : 'none';
}

/* ========== SEARCH ========== */
buscar.addEventListener('input', (e) => {
  const q = e.target.value.trim().toLowerCase();
  if(q === ''){
    currentList = autos.slice();
    grid.innerHTML = '';
    rendered = 0;
    renderChunk();
    return;
  }
  // search in nombre + detalles
  const matches = autos.filter(a => (a.nombre + ' ' + a.detalles).toLowerCase().includes(q));
  grid.innerHTML = '';
  currentList = matches;
  rendered = 0;
  // render all matches (no load more when searching)
  for(let i=0;i<matches.length;i++){
    const idx = autos.findIndex(x => x.id === matches[i].id);
    grid.appendChild(createCard(matches[i], idx));
  }
  observeLazy();
  updateLoadMore();
});

/* ========== LAZY IMAGE LOADING ========== */
function observeLazy(){
  if(observer){ observer.disconnect(); observer = null; }
  const lazyImgs = document.querySelectorAll('img.lazy');
  if('IntersectionObserver' in window){
    observer = new IntersectionObserver((entries, obs) => {
      entries.forEach(entry => {
        if(entry.isIntersecting){
          const img = entry.target;
          if(img.dataset.src){
            img.src = img.dataset.src;
            img.removeAttribute('data-src');
            img.classList.remove('lazy');
          }
          obs.unobserve(img);
        }
      });
    }, {root:null, threshold:0.1, rootMargin:'150px'});
    lazyImgs.forEach(i => observer.observe(i));
  } else {
    lazyImgs.forEach(i => { i.src = i.dataset.src; i.removeAttribute('data-src'); i.classList.remove('lazy'); });
  }
}

/* ========== EVENT DELEGATION: CLICKS EN CARDS ========== */
grid.addEventListener('click', (e) => {
  const btn = e.target.closest('.btn-copy');
  if(btn){
    const idx = parseInt(btn.dataset.idx,10);
    const a = autos[idx];
    const msg = `Hola, estoy interesado en el veh√≠culo ${a.nombre}. ${a.detalles} Precio: ${a.precio}.`;
    copyText(msg);
    btn.textContent = 'Copiado ‚úì';
    setTimeout(()=> btn.textContent = 'Copiar', 1400);
    return;
  }
  const img = e.target.closest('img.thumb');
  if(img){
    const idx = parseInt(img.dataset.idx,10);
    openModal(idx);
  }
});

/* ========== COPY HELPER ========== */
function copyText(text){
  if(navigator.clipboard){
    navigator.clipboard.writeText(text).catch(()=>{});
  } else {
    const ta = document.createElement('textarea'); ta.value = text; document.body.appendChild(ta); ta.select();
    try { document.execCommand('copy'); } catch(e){} ta.remove();
  }
}

/* ========== MODAL / VISOR ========== */
const visor = document.getElementById('visor');
const modalImg = document.getElementById('modalImg');
const modalTitle = document.getElementById('modalTitle');
const modalDetails = document.getElementById('modalDetails');
const modalPrice = document.getElementById('modalPrice');
const modalWhats = document.getElementById('modalWhats');
const modalCopy = document.getElementById('modalCopy');
const modalClose = document.getElementById('modalClose');
const modalPrev = document.getElementById('modalPrev');
const modalNext = document.getElementById('modalNext');

let modalIndex = 0;

function openModal(idx){
  modalIndex = idx;
  const a = autos[modalIndex];
  modalImg.src = a.img;
  modalTitle.textContent = a.nombre;
  modalDetails.textContent = a.detalles;
  modalPrice.textContent = a.precio;
  const mensaje = `Hola, estoy interesado en el veh√≠culo ${a.nombre}. ${a.detalles} Precio: ${a.precio}.`;
  modalWhats.href = `https://wa.me/5350896082?text=${encodeURIComponent(mensaje)}`;
  modalCopy.onclick = () => { copyText(mensaje); modalCopy.textContent = 'Copiado ‚úì'; setTimeout(()=> modalCopy.textContent = 'Copiar mensaje',1500); };
  showModal();
}

function showModal(){ visor.style.display = 'flex'; visor.setAttribute('aria-hidden','false'); }
function closeModal(){ visor.style.display = 'none'; visor.setAttribute('aria-hidden','true'); }

modalClose.addEventListener('click', closeModal);
visor.addEventListener('click', (e)=> { if(e.target === visor) closeModal(); });

modalPrev.addEventListener('click', ()=> {
  modalIndex = (modalIndex - 1 + autos.length) % autos.length;
  openModal(modalIndex);
});
modalNext.addEventListener('click', ()=> {
  modalIndex = (modalIndex + 1) % autos.length;
  openModal(modalIndex);
});
document.addEventListener('keydown', (e)=> {
  if(visor.style.display !== 'flex') return;
  if(e.key === 'ArrowLeft') modalPrev.click();
  if(e.key === 'ArrowRight') modalNext.click();
  if(e.key === 'Escape') closeModal();
});

/* ========== INICIALIZAR ========== */
(function init(){
  // render first chunk
  renderChunk();

  // load more
  loadMoreBtn.addEventListener('click', () => {
    renderChunk();
  });

  // enhance clicks on dynamically created WhatsApp links in card (delegation not necessary since anchor is direct)
  // Observe that card images have data-idx set to global index in createCard

  // ensure lazy observer runs on initial items
  observeLazy();
})();
</script>
</body>
</html>
